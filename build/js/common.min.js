"use strict";lazySizes.cfg.init=!1,customScroll(),$(document).ready(function(){hoverTouchEvents(),navigation(),inputs(),search(),popup.init(),slider.init(),setTimeout(function(){lazy()},500)});var brakepoints={xs:576,sm:768,md:992,lg:1280};function hoverTouchEvents(){$(document).on("mouseenter mouseleave touchstart touchend mousedown mouseup contextmenu","a[class],button,label,input,textarea,tr,.js-touch-hover",function(e){var t=$(this);device.desktop()?"mouseenter"==e.type?t.addClass("hover"):"mousedown"==e.type?t.addClass("mousedown"):("mouseup"==e.type||t.removeClass("hover"),t.removeClass("mousedown")):"touchstart"==e.type?t.addClass("touch"):"touchend"!=e.type&&"contextmenu"!=e.type||t.removeClass("touch")})}function lazy(){document.addEventListener("lazybeforeunveil",function(e){var t,o=e.target.tagName;e.target.getAttribute("data-src"),e.target.parentNode;"IMG"!==o&&(t=e.target.getAttribute("data-src"),e.target.style.backgroundImage="url('".concat(t,"')"))}),lazySizes.init()}function navigation(){var s;function e(){var e=$(".header__buttons-group"),t=$(".header__top .container"),o=$(".header__bottom .container");$(window).width()<brakepoints.md&&!s?(e.appendTo(t),s=!0):$(window).width()>=brakepoints.md&&s&&(e.appendTo(o),s=!1)}e(),$(window).on("resize",function(){e()})}function homeBanner(){$(".home-banner").slick({rows:0,speed:500,infinite:!0,slidesToShow:1,slidesToScroll:1,arrows:!0,nextArrow:'<button class="home-banner__arrow home-banner__next" aria-label="Next" type="button"><svg viewBox="0 0 15 26"><path d="M1.99869 0.292969L0.584473 1.70718L11.8774 13.0001L0.584472 24.293L1.99869 25.7072L14.7058 13.0001L1.99869 0.292969Z"/></svg></button>',prevArrow:'<button class="home-banner__arrow home-banner__prev" aria-label="Previous" type="button"><svg viewBox="0 0 15 26"><path d="M13.286 0.292969L14.7002 1.70718L3.4073 13.0001L14.7002 24.293L13.286 25.7072L0.578877 13.0001L13.286 0.292969Z"/></svg></button>',dots:!0,autoplay:!0,autoplaySpeed:5e3})}function inputs(){var e=$(".js-validation"),t=$("input, textarea");function o(){console.log("check"),t.each(function(){""==$(this).val()?$(this).removeClass("filled"):$(this).addClass("filled")})}t.on("focus",function(){$(this).addClass("focused")}),t.on("blur",function(){$(this).removeClass("focused")}),t.on("input change",function(){o()}),o();var l={phone:'[name="phone"]',email:'[name="email"]',name:'[name="name"]',message:'[name="message"]'},c={phone:{format:{pattern:/^\+7 \d{3}\ \d{3}\-\d{4}$|()/,message:"^Некорректный номер телефона"},presence:{allowEmpty:!1,message:"^Введите номер телефона"}},email:{email:{message:"^Неправильный формат. Попробуйте что-то с @"}},name:{presence:{allowEmpty:!1,message:"^Введите ваше имя"},length:{minimum:2,tooShort:"^Имя слишком короткое (минимум %{count} символа)",maximum:20,tooLong:"^Имя слишком длинное (максимум %{count} символов)"}},message:{length:{maximum:200,tooLong:"^Сообщение слишком длинное (максимум %{count} символов)"}}};Inputmask({mask:"+7 999 999-9999",showMaskOnHover:!1,clearIncomplete:!1}).mask(l.phone);e.each(function(){var e=$(this),r=e.find("input, textarea");function t(e){var o={},s={};r.each(function(){var e=$(this);for(var t in l)e.is(l[t])&&($(this).hasClass("required")||$(this).hasClass("filled"))&&(o[t]=e.val(),s[t]=c[t])});var n=validate(o,s);if(console.log(n),void 0===n)return r.removeClass("error"),r.parent().find(".input__message").remove(),1;if(void 0!==e){var t=!0;for(var a in n)e.is(l[a])&&(e.hasClass("required")||e.hasClass("filled"))&&(t=!1);t&&e.removeClass("error")}else{r.removeClass("error"),r.parent().find(".input__message").remove();for(var i in n)!function(t){r.each(function(){var e=$(this);e.is(l[t])&&(e.hasClass("required")||e.hasClass("filled"))&&(e.addClass("error"),e.parent().append('<span class="input__message">'.concat(n[t][0],"</span>")))})}(i)}}r.on("input",function(){var e=this;setTimeout(function(){t($(e))},100)}),e.on("submit",function(e){e.preventDefault(),t()&&(console.log("submit!"),r.val("").trigger("change"),popup.open($("#succes")))})})}function search(){var t=$(".header-search"),e=t.find(".header-search__input"),o=t.find(".header-search__content"),s=!1,n=!1;e.on("input",function(){""!==$(this).val()?t.addClass("active").addClass("active-content"):t.removeClass("active").removeClass("active-content")}),o.on("mouseenter mouseleave",function(e){"mouseenter"==e.type?n=!0:(n=!1,s||t.removeClass("active-content"))}),e.on("blur focus input",function(e){"blur"==e.type?(s=!1,n||t.removeClass("active-content")):"focus"!=e.type&&"input"!=e.type||(s=!0,""!==$(this).val()?t.addClass("active").addClass("active-content"):t.removeClass("active").removeClass("active-content"))})}function customScroll(){document.querySelectorAll(".scrollbar").forEach(function(e){var o=$(e),s=o.find(".scrollbar__content");function t(){var e=s.outerHeight()-o.outerHeight(),t=o.offset().top-s.offset().top;0<t?o.removeClass("scrollbar_start"):o.addClass("scrollbar_start"),t<e?o.removeClass("scrollbar_end"):o.addClass("scrollbar_end")}new SimpleBar(e).getScrollElement().addEventListener("scroll",function(){t()}),t()})}window.popup={init:function(){this.$trigger=$("[data-popup-open]"),this.$close=$("[data-popup-close]"),this.$trigger.on("click",function(e){e.preventDefault();var t=$($(this).attr("href"));t.length&&popup.open(t)}),$(document).on("click",function(e){var t,o=$(e.target);(o.closest(popup.$close).length||o.closest(".popup").length&&0==o.closest(".popup-block__container").length)&&(console.log("++"),e.preventDefault(),t=o.closest(".popup").length?o.closest(".popup"):$(".city-question-popup"),popup.close(t))})},open:function(e){function t(){o.active=e,scrollLock.disablePageScroll(),e.addClass("active")}var o=this;this.active?popup.close(this.active,function(){t()}):t()},close:function(e,t){var o=this;scrollLock.enablePageScroll(),e.removeClass("active"),setTimeout(function(){o.active=void 0,"function"==typeof t&&t()},250)}};var slider={el:$(".slider"),init:function(){slider.el.each(function(){var e=1,t=1,o=1,s=1,n=1,a=!1,i=!1,r=!1,l='<button type="button" class="button button_style-1 slider__next"><svg class="icon" viewBox="0 0 12 20"><path d="M2.18 19.05L.77 17.64 8.4 10 .77 2.36 2.18.95 11.23 10l-9.05 9.05z"></path></svg></button>',c='<button type="button" class="button button_style-1 slider__prev"><svg class="icon" viewBox="0 0 12 20"><path d="M2.18 19.05L.77 17.64 8.4 10 .77 2.36 2.18.95 11.23 10l-9.05 9.05z"></path></svg></button>';$(this).is(".popular-projects-section__slider")?(a=!0,s=o=t=e=2,n=1):$(this).is(".home-banner")?(r=i=a=!0,l='<button class="home-banner__arrow home-banner__next" aria-label="Next" type="button"><svg viewBox="0 0 15 26"><path d="M1.99869 0.292969L0.584473 1.70718L11.8774 13.0001L0.584472 24.293L1.99869 25.7072L14.7058 13.0001L1.99869 0.292969Z"/></svg></button>',c='<button class="home-banner__arrow home-banner__prev" aria-label="Previous" type="button"><svg viewBox="0 0 15 26"><path d="M13.286 0.292969L14.7002 1.70718L3.4073 13.0001L14.7002 24.293L13.286 25.7072L0.578877 13.0001L13.286 0.292969Z"/></svg></button>'):$(this).is(".news-preview-section__slider")&&(a=!0,t=e=3,s=o=2,n=1),$(this).slick({rows:0,infinite:!0,dots:i,arrows:a,nextArrow:l,prevArrow:c,speed:500,centerMode:!1,slidesToShow:e,slidesToScroll:e,autoplay:r,autoplaySpeed:5e3,responsive:[{breakpoint:brakepoints.lg,settings:{slidesToShow:t,slidesToScroll:t}},{breakpoint:brakepoints.md,settings:{slidesToShow:o,slidesToScroll:o}},{breakpoint:brakepoints.sm,settings:{slidesToShow:s,slidesToScroll:s}},{breakpoint:brakepoints.xs,settings:{slidesToShow:n,slidesToScroll:n}}]})})}};
//# sourceMappingURL=maps/common.min.js.map
