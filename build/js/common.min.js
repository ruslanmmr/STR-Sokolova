"use strict";function _createForOfIteratorHelper(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){r=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,s=new Array(t);o<t;o++)s[o]=e[o];return s}lazySizes.cfg.init=!1,customScroll(),$(document).ready(function(){select.init(),touchHoverEvents(),inputs(),search(),nav(),toggle(),scrollTo(),popup.init(),slider.init(),fixedBlocks(),tabs(),scrollToReviews(),header(),rating(),calculator(),setTimeout(function(){lazy()},500)});var brakepoints={xs:576,sm:768,md:992,lg:1280};function touchHoverEvents(){document.addEventListener("touchstart",e),document.addEventListener("touchend",e),document.addEventListener("mouseover",e),document.addEventListener("mouseout",e),document.addEventListener("mousedown",e),document.addEventListener("mouseup",e),document.addEventListener("contextmenu",e);var i,r,l="a[class], button, label, input, textarea, tr, .js-touch-hover, .selectric-items li, .selectric .label, .button";function e(e){if(e.target!==document){var t=e.target.closest(l);if(null!==t){if("touchstart"==e.type){var o,s=_createForOfIteratorHelper(document.querySelectorAll(l));try{for(s.s();!(o=s.n()).done;){o.value.classList.remove("touch")}}catch(e){s.e(e)}finally{s.f()}i=!0,clearTimeout(r),t.classList.add("touch")}else("touchend"==e.type||"contextmenu"==e.type)&&(t.classList.remove("touch"),r=setTimeout(function(){i=!1},1e3));"mouseover"!=e.type||i?"mouseout"!=e.type||i||(t.classList.remove("hover"),t.classList.remove("focus")):t.classList.add("hover"),"mousedown"==e.type?t.classList.add("focus"):"mouseup"==e.type&&t.classList.remove("focus")}else{var n,a=_createForOfIteratorHelper(document.querySelectorAll(l));try{for(a.s();!(n=a.n()).done;){n.value.classList.remove("touch")}}catch(e){a.e(e)}finally{a.f()}}}}}function lazy(){document.addEventListener("lazybeforeunveil",function(e){var t,o=e.target.tagName;e.target.getAttribute("data-src"),e.target.parentNode;"IMG"!==o&&(t=e.target.getAttribute("data-src"),e.target.style.backgroundImage="url('".concat(t,"')"))}),lazySizes.init()}function inputs(){var e=$(".js-validation"),t=$("input, textarea");function o(){t.each(function(){""==$(this).val()?($(this).removeClass("filled"),$(this).parent().removeClass("filled")):($(this).addClass("filled"),$(this).parent().addClass("filled"))})}t.on("focus",function(){$(this).addClass("focused")}),t.on("blur",function(){$(this).removeClass("focused")}),t.on("input change",function(){o()}),o();var l={phone:'[name="phone"]',email:'[name="email"]',name:'[name="name"]',message:'[name="message"]',review:'[name="review"]'},c={phone:{format:{pattern:/^\+7 \d{3}\ \d{3}\-\d{4}$|()/,message:"^Некорректный номер телефона"},presence:{allowEmpty:!1,message:"^Введите номер телефона"}},email:{email:{message:"^Неправильный формат. Попробуйте что-то с @"}},name:{presence:{allowEmpty:!1,message:"^Введите ваше имя"},length:{minimum:2,tooShort:"^Имя слишком короткое (минимум %{count} символа)",maximum:20,tooLong:"^Имя слишком длинное (максимум %{count} символов)"}},message:{presence:{allowEmpty:!1,message:"^Введите ваше сообщение"},length:{minimum:10,tooShort:"^Сообщение слишком короткое (минимум %{count} символов)",maximum:200,tooLong:"^Сообщение слишком длинное (максимум %{count} символов)"}},review:{presence:{allowEmpty:!1,message:"^Напишите ваш отзыв"},length:{minimum:10,tooShort:"^Отзыв слишком короткий (минимум %{count} символов)",maximum:200,tooLong:"^Отзыв слишком длинный (максимум %{count} символов)"}}};Inputmask({mask:"+7 999 999-9999",showMaskOnHover:!1,clearIncomplete:!1}).mask(l.phone);e.each(function(){var e=$(this),r=e.find("input, textarea");function t(e){var o={},s={};r.each(function(){var e=$(this);for(var t in l)e.is(l[t])&&($(this).hasClass("required")||$(this).hasClass("filled"))&&(o[t]=e.val(),s[t]=c[t])});var n=validate(o,s);if(void 0===n)return r.removeClass("error"),r.parent().find(".input__message").remove(),1;if(void 0!==e){var t=!0;for(var a in n)e.is(l[a])&&(e.hasClass("required")||e.hasClass("filled"))&&(t=!1);t&&e.removeClass("error")}else{r.removeClass("error"),r.parent().find(".input__message").remove();for(var i in n)!function(t){r.each(function(){var e=$(this);e.is(l[t])&&(e.hasClass("required")||e.hasClass("filled"))&&(e.addClass("error"),e.parent().append('<span class="input__message">'.concat(n[t][0],"</span>")))})}(i)}}r.on("input",function(){var e=this;setTimeout(function(){t($(e))},100)}),e.on("submit",function(e){e.preventDefault(),t()&&(console.log("submit!"),r.val("").trigger("change"),popup.open($("#succes")))})})}function search(){$(".search").each(function(){var t=$(this),e=t.find(".search__input"),o=t.find(".search__content"),s=!1,n=!1;o.on("mouseenter mouseleave",function(e){device.desktop()&&("mouseenter"==e.type?n=!0:(n=!1,s||t.removeClass("active-content")))}),e.on("blur focus input",function(e){console.log("++"),"blur"==e.type?(s=!1,!n&&device.desktop()&&t.removeClass("active-content")):"focus"==e.type?s=!0:""!==$(this).val()?t.addClass("active").addClass("active-content"):t.removeClass("active").removeClass("active-content")}),$(document).on("touchstart",function(e){0==$(e.target).closest(t).length&&t.removeClass("active-content")})})}function customScroll(){document.querySelectorAll(".scrollbar").forEach(function(e){var t,o,s,n=$(e);function a(){var e=s.outerHeight()-o.outerHeight(),t=o.offset().top-s.offset().top;console.log(s.outerHeight()),0<t?n.removeClass("scrollbar_start"):n.addClass("scrollbar_start"),t<e?n.removeClass("scrollbar_end"):n.addClass("scrollbar_end")}device.desktop()&&!n.is(".scrollbar_mobile-only")?(t=new SimpleBar(e),s=(o=n).find(".scrollbar__content"),t.getScrollElement().addEventListener("scroll",function(){a()})):(n.addClass("scrollbar_mobile"),o=n.find(".scrollbar__content"),s=n.find(".scrollbar__inner"),o.on("scroll",function(){a()})),o.add(s).attr("data-scroll-lock-scrollable",""),a()})}window.popup={init:function(){this.$trigger=$("[data-popup-open]"),this.$close=$("[data-popup-close]"),this.$trigger.on("click",function(e){e.preventDefault();var t=$($(this).attr("href"));t.length&&popup.open(t)}),$(document).on("click",function(e){var t,o=$(e.target);(o.closest(popup.$close).length||o.closest(".popup").length&&0==o.closest(".popup-block__container").length)&&(e.preventDefault(),t=o.closest(".popup").length?o.closest(".popup"):$(".city-question-popup"),popup.close(t))})},open:function(e){function t(){o.active=e,scrollLock.disablePageScroll(),e.addClass("active")}var o=this;this.active?popup.close(this.active,function(){t()}):t()},close:function(e,t){var o=this;scrollLock.enablePageScroll(),e.removeClass("active"),setTimeout(function(){o.active=void 0,"function"==typeof t&&t()},250)}};var slider={el:$(".slider"),init:function(){slider.el.each(function(){var e,t,o=this,s=1,n=1,a=1,i=1,r=1,l=!1,c=!1,u=!1,d=!1,v='<button type="button" class="button button_style-1 slider__next"><svg class="icon" viewBox="0 0 12 20"><path d="M2.18 19.05L.77 17.64 8.4 10 .77 2.36 2.18.95 11.23 10l-9.05 9.05z"></path></svg></button>',f='<button type="button" class="button button_style-1 slider__prev"><svg class="icon" viewBox="0 0 12 20"><path d="M2.18 19.05L.77 17.64 8.4 10 .77 2.36 2.18.95 11.23 10l-9.05 9.05z"></path></svg></button>';function p(e){e.slick({rows:0,infinite:!0,dots:c,arrows:l,nextArrow:v,prevArrow:f,speed:500,centerMode:u,slidesToShow:s,slidesToScroll:s,autoplay:d,autoplaySpeed:5e3,responsive:[{breakpoint:brakepoints.lg,settings:{slidesToShow:n,slidesToScroll:n}},{breakpoint:brakepoints.md,settings:{slidesToShow:a,slidesToScroll:a}},{breakpoint:brakepoints.sm,settings:{slidesToShow:i,slidesToScroll:i}},{breakpoint:brakepoints.xs,settings:{slidesToShow:r,slidesToScroll:r}}]})}$(this).is(".slider_dots")&&(c=!0),$(this).is(".slider_arrows")&&(l=!0),$(this).is(".popular-projects__slider")?(l=!0,i=a=n=s=2,r=1,$(this).is(".popular-projects__slider_mobile-only")?(e=!1,(t=function(){$(window).width()<brakepoints.md&&!e?(e=!0,p($(o))):$(window).width()>=brakepoints.md&&e&&(e=!1,setTimeout(function(){$(o).slick("unslick")},500))})(),$(window).on("resize",function(){t()})):p($(this))):$(this).is(".home-banner")?(d=c=l=!0,v='<button class="home-banner__arrow home-banner__next" aria-label="Next" type="button"><svg viewBox="0 0 15 26"><path d="M1.99869 0.292969L0.584473 1.70718L11.8774 13.0001L0.584472 24.293L1.99869 25.7072L14.7058 13.0001L1.99869 0.292969Z"/></svg></button>',f='<button class="home-banner__arrow home-banner__prev" aria-label="Previous" type="button"><svg viewBox="0 0 15 26"><path d="M13.286 0.292969L14.7002 1.70718L3.4073 13.0001L14.7002 24.293L13.286 25.7072L0.578877 13.0001L13.286 0.292969Z"/></svg></button>',p($(this))):$(this).is(".photo-slider")?p($(this)):$(this).is(".news-preview-section__slider")?(l=!0,n=s=3,i=a=2,r=1,p($(this))):$(this).is(".section-partners__slider")?(d=l=!0,s=6,n=5,a=4,i=3,r=1,p($(this))):$(this).is(".projects-slider")&&(s=4,n=3,i=a=2,r=1,p($(this)))})}},select={init:function(){this.items=$("select"),this.items.length&&this.items.selectric({disableOnMobile:!1,nativeOnMobile:!1,arrowButtonMarkup:'<svg class="icon" viewBox="0 0 12 7" xmlns="http://www.w3.org/2000/svg"><path d="M9.72606 -1.19209e-07L11.1403 1.41421L5.57036 6.98453L4.15614 5.57031L9.72606 -1.19209e-07Z"/><path d="M0 1.41421L1.41421 1.19209e-07L6.98434 5.57047L5.57036 6.98453L0 1.41421Z"/></svg>'})}};function header(){var e,t=$(".header");function o(){$(window).width()<brakepoints.md&&(e=$(window).scrollTop(),130<e?t.addClass("fixed"):t.removeClass("fixed"))}o(),$(window).scroll(function(){o()})}function nav(){var t,o=$(".nav-toggle"),s=$(".mobile-nav");o.on("click",function(e){e.preventDefault(),t?(t=!1,scrollLock.enablePageScroll(),s.add(o).removeClass("active")):(t=!0,scrollLock.disablePageScroll(),s.add(o).addClass("active"))})}function toggle(){var e=$(".toggle-section");e.each(function(){var e,t=$(this),o=t.children(".toggle-section__head"),s=t.children(".toggle-section__content"),n=!!t.hasClass("active"),a=s.height();function i(){n?(t.add(s).add(o).addClass("active"),t.is("[data-class-only]")||(s.is(".scrollbar")&&s.height(a),s.slideDown(250))):(t.add(o).add(s).removeClass("active"),t.is("[data-class-only]")||(e?(s.is(".scrollbar")&&(a=s.height()),s.stop().slideUp(250)):s.hide(0)))}t.is("[data-out-hide]")&&$(document).on("click touchstart",function(e){var t=$(e.target);t.closest(s).length||t.closest(o).length||!n||(n=!1,i())}),o.on("click",function(){n=!n,i()}),i(),e=!0})}function tabs(){$(".tabs").each(function(){var e=$(this).find(".tabs__toggle"),t=$(this).find(".tabs__block"),o=0<$(this).find(".tabs__block.active").length?e.index($(this).find(".tabs__block.active")):0;function s(){t.hide().eq(o).fadeIn(250),e.removeClass("active").eq(o).addClass("active")}s(),e.on("click",function(){o=e.index($(this)),s()})})}function scrollTo(){var e=$("[data-scroll]");e.on("click",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(t);o.length&&$("html, body").animate({scrollTop:o.offset().top},500)})}function scrollToReviews(){var e=$("[data-reviews]");e.on("click",function(e){e.preventDefault(),$(".item-info__reviews-toggle:visible").not(".active").trigger("click");var t=$(".reviews__content"),o=$(window).width()<brakepoints.md?t.offset().top-50:t.offset().top;t.length&&$("html, body").animate({scrollTop:o},500)})}function fixedBlocks(){$("[data-fixed-toggle]").on("click",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(t);o.length&&(o.addClass("active"),scrollLock.disablePageScroll(),o.find("[data-fixed-close]").on("click",function(e){e.preventDefault(),o.removeClass("active"),scrollLock.enablePageScroll()}))})}function rating(){$(document).on("click",".js-rating__star",function(e){var t=$(e.target).closest(".js-rating"),o=$(e.target).closest(".js-rating__star"),s=o.parents(".js-rating").find(".js-rating__star"),n=o.parents(".js-rating").find("input"),a=+o.attr("data-index"),i=t.find(".js-rating__description-item");n.val(a),i.removeClass("active"),i.eq(a-1).addClass("active"),s.each(function(e){e<a?$(this).addClass("active"):$(this).removeClass("active")})}),$(document).on("mousemove mouseleave",".js-rating__list",function(e){var t,o,s=$(e.target).closest(".js-rating"),n=$(e.target).closest(".js-rating__list"),a=n.find(".js-rating__star"),i=n.parents(".js-rating").find("input"),r=s.find(".js-rating__description-item");"mousemove"==e.type&&device.desktop()&&0<n.length&&(t=(e.clientX-n.offset().left)/n.width()*5,a.each(function(e){e<t?$(this).addClass("active"):$(this).removeClass("active")}),r.each(function(e){return e<t&&(r.removeClass("active"),void $(this).addClass("active"))})),"mouseleave"==e.type&&device.desktop()&&0<n.length&&(o=i.val(),r.removeClass("active"),0<o?(r.eq(o-1).addClass("active"),a.each(function(e){e<o?$(this).addClass("active"):$(this).removeClass("active")})):a.removeClass("active"))})}function calculator(){$(".calc-count-block").each(function(){var e=$(this),t=e.find(".js-plus"),o=e.find(".js-minus"),s=e.find("input"),n=+s.val();function a(){n<1||1==n?(n=1,o.addClass("disabled")):o.removeClass("disabled"),s.val(n)}a(),t.on("click",function(){n++,a()}),o.on("click",function(){n--,a()}),s.on("change input",function(){setTimeout(function(){n=+s.val(),a()},100)})})}
//# sourceMappingURL=maps/common.min.js.map
