"use strict";function _createForOfIteratorHelper(t,e){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,s=new Array(e);o<e;o++)s[o]=t[o];return s}lazySizes.cfg.init=!1,customScroll(),$(document).ready(function(){select.init(),touchHoverEvents(),inputs(),search(),nav(),toggle(),scrollTo(),popup.init(),slider.init(),tooltips.init(),fixedBlocks(),tabs(),scrollToTab(),header(),diagram(),rating(),calculator(),stagesToggle(),jsRange(),gridToggle(),comparison(),setTimeout(function(){lazy()},500)});var brakepoints={xs:576,sm:768,md:992,lg:1280};function touchHoverEvents(){document.addEventListener("touchstart",t),document.addEventListener("touchend",t),document.addEventListener("mouseenter",t,!0),document.addEventListener("mouseleave",t,!0),document.addEventListener("mousedown",t),document.addEventListener("mouseup",t),document.addEventListener("contextmenu",t);var n,a,i="a[class], button, label, input, textarea, tr, .js-touch-hover, .selectric-items li, .selectric .label, .button, .comparison-property",r=250;function t(t){var e=t.target!==document&&t.target.closest(i);if(e){if("touchstart"==t.type){n=!0;var o,s=_createForOfIteratorHelper(document.querySelectorAll(i));try{for(s.s();!(o=s.n()).done;){o.value.classList.remove("touch")}}catch(t){s.e(t)}finally{s.f()}clearTimeout(a),e.classList.add("touch"),$(e).trigger("customTouchstart")}else"touchend"==t.type?(setTimeout(function(){e.classList.remove("touch"),$(e).trigger("customTouchend")},r),a=setTimeout(function(){n=!1},1e3)):"contextmenu"==t.type&&(e.classList.remove("touch"),$(e).trigger("customTouchend"),a=setTimeout(function(){n=!1},1e3));"mouseenter"!=t.type||n||e!=t.target?"mouseleave"!=t.type||n||e!=t.target||(e.classList.remove("hover"),e.classList.remove("focus"),$(e).trigger("customMouseleave")):(e.classList.add("hover"),$(e).trigger("customMouseenter")),"mousedown"==t.type?e.classList.add("focus"):"mouseup"==t.type&&e.classList.remove("focus")}}}function lazy(){document.addEventListener("lazybeforeunveil",function(t){var e,o=t.target.tagName;t.target.getAttribute("data-src"),t.target.parentNode;"IMG"!==o&&(e=t.target.getAttribute("data-src"),t.target.style.backgroundImage="url('".concat(e,"')"))}),lazySizes.init()}function inputs(){var t=$(".js-validation"),e=$("input, textarea");function o(){e.each(function(){""==$(this).val()?($(this).removeClass("filled"),$(this).parent().removeClass("filled")):($(this).addClass("filled"),$(this).parent().addClass("filled"))})}e.on("focus",function(){$(this).addClass("focused")}),e.on("blur",function(){$(this).removeClass("focused")}),e.on("input change",function(){o()}),o();var c={phone:'[name="phone"]',email:'[name="email"]',name:'[name="name"]',message:'[name="message"]',review:'[name="review"]'},l={phone:{format:{pattern:/^\+7 \d{3}\ \d{3}\-\d{4}$|()/,message:"^Некорректный номер телефона"},presence:{allowEmpty:!1,message:"^Введите номер телефона"}},email:{email:{message:"^Неправильный формат. Попробуйте что-то с @"}},name:{presence:{allowEmpty:!1,message:"^Введите ваше имя"},length:{minimum:2,tooShort:"^Имя слишком короткое (минимум %{count} символа)",maximum:20,tooLong:"^Имя слишком длинное (максимум %{count} символов)"}},message:{presence:{allowEmpty:!1,message:"^Введите ваше сообщение"},length:{minimum:10,tooShort:"^Сообщение слишком короткое (минимум %{count} символов)",maximum:200,tooLong:"^Сообщение слишком длинное (максимум %{count} символов)"}},review:{presence:{allowEmpty:!1,message:"^Напишите ваш отзыв"},length:{minimum:10,tooShort:"^Отзыв слишком короткий (минимум %{count} символов)",maximum:200,tooLong:"^Отзыв слишком длинный (максимум %{count} символов)"}}};Inputmask({mask:"+7 999 999-9999",showMaskOnHover:!1,clearIncomplete:!1}).mask(c.phone);t.each(function(){var t=$(this),r=t.find("input, textarea");function e(t){var o={},s={};r.each(function(){var t=$(this);for(var e in c)t.is(c[e])&&($(this).hasClass("required")||$(this).hasClass("filled"))&&(o[e]=t.val(),s[e]=l[e])});var n=validate(o,s);if(void 0===n)return r.removeClass("error"),r.parent().find(".input__message").remove(),1;if(void 0!==t){var e=!0;for(var a in n)t.is(c[a])&&(t.hasClass("required")||t.hasClass("filled"))&&(e=!1);e&&t.removeClass("error")}else{r.removeClass("error"),r.parent().find(".input__message").remove();for(var i in n)!function(e){r.each(function(){var t=$(this);t.is(c[e])&&(t.hasClass("required")||t.hasClass("filled"))&&(t.addClass("error"),t.parent().append('<span class="input__message">'.concat(n[e][0],"</span>")))})}(i)}}r.on("input",function(){var t=this;setTimeout(function(){e($(t))},100)}),t.on("submit",function(t){t.preventDefault(),e()})})}function search(){$(".search").each(function(){var e=$(this),t=e.find(".search__input"),o=e.find(".search__content"),s=!1,n=!1;o.on("mouseenter mouseleave",function(t){device.desktop()&&("mouseenter"==t.type?n=!0:(n=!1,s||e.removeClass("active-content")))}),t.on("blur focus input",function(t){"blur"==t.type?(s=!1,!n&&device.desktop()&&e.removeClass("active-content")):"focus"==t.type?s=!0:""!==$(this).val()?e.addClass("active").addClass("active-content"):e.removeClass("active").removeClass("active-content")}),$(document).on("touchstart",function(t){0==$(t.target).closest(e).length&&e.removeClass("active-content")})})}function customScroll(){document.querySelectorAll(".scrollbar").forEach(function(t){var e,o,s,n=$(t);function a(){var t=s.outerHeight()-o.outerHeight(),e=o.offset().top-s.offset().top;0<e?n.removeClass("scrollbar_start"):n.addClass("scrollbar_start"),e<t?n.removeClass("scrollbar_end"):n.addClass("scrollbar_end")}device.desktop()&&!n.is(".scrollbar_mobile-only")?(e=new SimpleBar(t),s=(o=n).find(".scrollbar__content"),e.getScrollElement().addEventListener("scroll",function(){a()})):(n.addClass("scrollbar_mobile"),o=n.find(".scrollbar__content"),s=n.find(".scrollbar__inner"),o.on("scroll",function(){a()})),o.add(s).attr("data-scroll-lock-scrollable",""),a()})}window.popup={init:function(){this.$trigger=$("[data-popup-open]"),this.$close=$("[data-popup-close]"),this.$trigger.on("click",function(t){t.preventDefault();var e=$($(this).attr("href"));e.length&&popup.open(e)}),$(document).on("click",function(t){var e,o=$(t.target);(o.closest(popup.$close).length||o.closest(".popup").length&&0==o.closest(".popup-block__container").length)&&(t.preventDefault(),e=o.closest(".popup").length?o.closest(".popup"):$(".city-question-popup"),popup.close(e))})},open:function(t){function e(){o.active=t,scrollLock.disablePageScroll(),t.addClass("active")}var o=this;this.active?popup.close(this.active,function(){e()}):e()},close:function(t,e){var o=this;scrollLock.enablePageScroll(),t.removeClass("active"),setTimeout(function(){o.active=void 0,"function"==typeof e&&e()},250)}};var slider={el:$(".slider"),arrowPrev:'<svg class="icon" viewBox="0 0 10.5 18.1"><path stroke="none" d="M9,0l1.4,1.4L2.8,9l7.6,7.6L9,18.1L0,9C0,9,9.1,0,9,0z"></path></svg>',arrowNext:'<svg class="icon" viewBox="0 0 10.5 18.1"><path stroke="none" d="M1.4,18.1L0,16.7l7.6-7.6L0,1.5L1.4,0l9,9.1C10.4,9.1,1.3,18.1,1.4,18.1z"></path></svg>',init:function(){slider.el.each(function(){var t,e,o,s,n,a,i=this,r=1,c=1,l=1,d=1,u=1,p=!1,h=!1,f=!1,v=!1,m='<button type="button" class="button button_style-1 slider__next">'.concat(slider.arrowNext,"</button>"),g='<button type="button" class="button button_style-1 slider__prev">'.concat(slider.arrowPrev,"</button>");function _(t){t.slick({rows:0,infinite:!0,dots:h,arrows:p,nextArrow:m,prevArrow:g,speed:500,centerMode:f,slidesToShow:r,slidesToScroll:r,autoplay:v,autoplaySpeed:5e3,responsive:[{breakpoint:brakepoints.lg,settings:{slidesToShow:c,slidesToScroll:c}},{breakpoint:brakepoints.md,settings:{slidesToShow:l,slidesToScroll:l}},{breakpoint:brakepoints.sm,settings:{slidesToShow:d,slidesToScroll:d}},{breakpoint:brakepoints.xs,settings:{slidesToShow:u,slidesToScroll:u}}]})}$(this).is(".slider_dots")&&(h=!0),$(this).is(".slider_arrows")&&(p=!0),$(this).is(".slider_grid")&&(h=p=!0),$(this).is(".popular-projects__slider")?(d=l=c=r=2,u=1,$(this).is(".popular-projects__slider_mobile-only")?(t=!1,(e=function(){$(window).width()<brakepoints.md&&!t?(t=!0,_($(i))):$(window).width()>=brakepoints.md&&t&&(t=!1,setTimeout(function(){$(i).slick("unslick")},500))})(),$(window).on("resize",function(){e()})):_($(this))):$(this).is(".home-banner")?(v=!0,m='<button class="home-banner__arrow home-banner__next" aria-label="Next" type="button">'.concat(slider.arrowNext,"</button>"),g='<button class="home-banner__arrow home-banner__prev" aria-label="Previous" type="button">'.concat(slider.arrowPrev,"</button>"),_($(this))):$(this).is(".photo-slider")?_($(this)):$(this).is(".news-preview-section__slider")?(c=r=3,d=l=2,u=1,_($(this))):$(this).is(".section-partners__slider")?(v=!0,r=6,c=5,l=4,d=3,u=1,_($(this))):$(this).is(".projects-slider")||$(this).is(".progress-projects-slider")?(r=4,c=3,d=l=2,u=1,_($(this))):$(this).is(".product-slider")?(c=$(this).is(".product-slider_style-2")?(r=4,3):(r=5,4),l=3,d=2,u=1,_($(this))):$(this).is(".wiki-slider")&&(r=4,l=c=3,d=2,u=1,_($(this))),$(this).is(".item-slider")&&$(this).slick({slidesToShow:1,slidesToScroll:1,arrows:!1,rows:0,asNavFor:".nav-slider",responsive:[{breakpoint:brakepoints.sm,settings:{dots:!0}}]}),$(this).is(".nav-slider")&&$(this).slick({slidesToShow:3,slidesToScroll:1,asNavFor:".item-slider",dots:!1,rows:0,centerMode:!0,centerPadding:0,focusOnSelect:!0,prevArrow:'<button type="button" class="nav-slider__arrow nav-slider__arrow-prev">'.concat(slider.arrowPrev,"</button>"),nextArrow:'<button type="button" class="nav-slider__arrow nav-slider__arrow-next">'.concat(slider.arrowNext,"</button>")}),$(this).is(".comparison-slider")&&(o=$(".comparison-slider"),s=$(".comparison__counter span:last-child"),n=$(".comparison__counter span:first-child"),a=function(t){var e=o.find(".slick-active");s.text(t),n.text("".concat(e.first().index()+1,"–").concat(e.last().index()+1," "))},o.on("init",function(t,e){a(e.slideCount)}),o.on("afterChange",function(t,e,o,s){a(e.slideCount)}),o.slick({slidesToShow:4,slidesToScroll:4,arrows:!0,dots:!1,infinite:!1,nextArrow:'<button type="button" class="button button_style-1 slider__next"><span>След.</span>'.concat(slider.arrowNext,"</button>"),prevArrow:'<button type="button" class="button button_style-1 slider__prev">'.concat(slider.arrowPrev,"<span>Пред.</span></button>"),rows:0,responsive:[{breakpoint:brakepoints.lg,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:brakepoints.md,settings:{slidesToShow:2,slidesToScroll:2}}]}))})}},select={init:function(){this.items=$("select"),this.items.length&&this.items.selectric({disableOnMobile:!1,nativeOnMobile:!1,arrowButtonMarkup:'<svg class="icon" viewBox="0 0 12 7" xmlns="http://www.w3.org/2000/svg"><path d="M9.72606 -1.19209e-07L11.1403 1.41421L5.57036 6.98453L4.15614 5.57031L9.72606 -1.19209e-07Z"/><path d="M0 1.41421L1.41421 1.19209e-07L6.98434 5.57047L5.57036 6.98453L0 1.41421Z"/></svg>'})}};function header(){var t,e=$(".header");function o(){$(window).width()<brakepoints.md&&(t=$(window).scrollTop(),130<t?e.addClass("fixed"):e.removeClass("fixed"))}o(),$(window).scroll(function(){o()})}function nav(){var e,o=$(".nav-toggle"),s=$(".mobile-nav");o.on("click",function(t){t.preventDefault(),e?(e=!1,scrollLock.enablePageScroll(),s.add(o).removeClass("active")):(e=!0,scrollLock.disablePageScroll(),s.add(o).addClass("active"))})}function toggle(){var t=$(".toggle-section");t.each(function(){var t,e=$(this),o=e.children(".toggle-section__head"),s=e.children(".toggle-section__content"),n=!!e.hasClass("active"),a=s.height();function i(){n?(e.add(s).add(o).addClass("active"),e.is("[data-class-only]")||(s.is(".scrollbar")&&s.height(a),s.slideDown(250))):(e.add(o).add(s).removeClass("active"),e.is("[data-class-only]")||(t?(s.is(".scrollbar")&&(a=s.height()),s.stop().slideUp(250)):s.hide(0)))}e.is("[data-out-hide]")&&$(document).on("click touchstart",function(t){var e=$(t.target);e.closest(s).length||e.closest(o).length||!n||(n=!1,i())}),o.on("click",function(){n=!n,i()}),i(),t=!0})}function tabs(){$(".tabs").each(function(){var t=$(this).find(".tabs__toggle"),e=$(this).find(".tabs__block"),o=0<$(this).find(".tabs__block.active").length?e.index($(this).find(".tabs__block.active")):0;function s(){e.hide().eq(o).fadeIn(250),t.removeClass("active").eq(o).addClass("active")}s(),t.on("click",function(){o=t.index($(this)),s()})})}function scrollTo(){var t=$("[data-scroll]");t.on("click",function(t){t.preventDefault();var e=$(this).attr("href"),o=$(e);o.length&&$("html, body").animate({scrollTop:o.offset().top},500)})}function scrollToTab(){var t=$("[data-go-tab]");t.on("click",function(t){t.preventDefault();var e=$($(this).attr("href")),o=e.index(".tabs__block"),s=$(window).width()<brakepoints.md?($(".item-info .toggle-section__head").eq(o).not(".active").trigger("click"),e.offset().top-50):($(".item-info .tabs__toggle").eq(o).not(".active").trigger("click"),e.offset().top-40);e.length&&$("html, body").animate({scrollTop:s},500)})}function fixedBlocks(){$("[data-fixed-toggle]").on("click",function(t){t.preventDefault();var e=$(this).attr("href"),o=$(e);o.length&&(o.addClass("active"),scrollLock.disablePageScroll(),o.find("[data-fixed-close]").on("click",function(t){t.preventDefault(),o.removeClass("active"),scrollLock.enablePageScroll()}))})}function rating(){$(document).on("click",".js-rating__star",function(t){var e=$(t.target).closest(".js-rating"),o=$(t.target).closest(".js-rating__star"),s=o.parents(".js-rating").find(".js-rating__star"),n=o.parents(".js-rating").find("input"),a=+o.attr("data-index"),i=e.find(".js-rating__description-item");n.val(a),i.removeClass("active"),i.eq(a-1).addClass("active"),s.each(function(t){t<a?$(this).addClass("active"):$(this).removeClass("active")})}),$(document).on("mousemove mouseleave",".js-rating__list",function(t){var e,o,s=$(t.target).closest(".js-rating"),n=$(t.target).closest(".js-rating__list"),a=n.find(".js-rating__star"),i=n.parents(".js-rating").find("input"),r=s.find(".js-rating__description-item");"mousemove"==t.type&&device.desktop()&&0<n.length&&(e=(t.clientX-n.offset().left)/n.width()*5,a.each(function(t){t<e?$(this).addClass("active"):$(this).removeClass("active")}),r.each(function(t){return t<e&&(r.removeClass("active"),void $(this).addClass("active"))})),"mouseleave"==t.type&&device.desktop()&&0<n.length&&(o=i.val(),r.removeClass("active"),0<o?(r.eq(o-1).addClass("active"),a.each(function(t){t<o?$(this).addClass("active"):$(this).removeClass("active")})):a.removeClass("active"))})}function calculator(){$(".calc-count-block").each(function(){var t=$(this),e=t.find(".js-plus"),o=t.find(".js-minus"),s=t.find("input"),n=+s.val();function a(){n<1||1==n?(n=1,o.addClass("disabled")):o.removeClass("disabled"),s.val(n)}a(),e.on("click",function(){n++,a()}),o.on("click",function(){n--,a()}),s.on("change input",function(){setTimeout(function(){n=+s.val(),a()},100)})})}function stagesToggle(){var t=$("[data-stage-toggle]"),e=$("[data-stage]"),o=0<$(".active[data-stage-toggle]").length?$(".active[data-stage-toggle]").attr("data-stage-toggle"):"all";function s(){t.removeClass("active").closest("[data-stage-toggle='".concat(o,"']")).addClass("active"),"all"==o?e.addClass("active"):e.each(function(){$(this).attr("data-stage")==o?$(this).addClass("active"):$(this).removeClass("active")})}t.on("click",function(t){t.preventDefault(),o=$(this).attr("data-stage-toggle"),s()}),s()}function diagram(){var t,e,o,s,n,a,i,r,c,l,d,u,p,h,f=$(".brigade-diagram__circle");function v(t){return t*(Math.PI/180)}f.length&&(t=f.find(".brigade-diagram__circle-item_style-2 circle"),e=parseInt(f.attr("data-percent")),o=$(".brigade-diagram__info_style-1"),s=$(".brigade-diagram__info_style-2"),n=(f.height()-30)/2,i=360-(a=90-3.6*e/2),r=v(a),c=v(i),l=t[0].getTotalLength(),t.css("stroke-dasharray",l),t.css("stroke-dashoffset",l-l/100*e),d=n*Math.cos(c),u=n*Math.sin(c),p=n*Math.cos(r),h=n*Math.sin(r),o.css({transform:"translate(".concat(-d,"px, ").concat(-u,"px)")}),s.css({transform:"translate(".concat(p,"px, ").concat(-h,"px)")}))}function jsRange(){$(".filter-range").each(function(){var e,o,s,t=$(this),n=t.find(".js-range"),a=t.find(".filter-range__input-from"),i=t.find(".filter-range__input-to"),r=+n.attr("data-min"),c=+n.attr("data-max");function l(t){o=t.from,s=t.to,a.prop("value",o),i.prop("value",s)}n.ionRangeSlider({skin:"round",type:"double",min:r,max:c,from:r,to:c,onStart:l,onChange:l,onFinish:l}),e=n.data("ionRangeSlider"),a.on("change",function(){var t=$(this).prop("value");t<r?t=r:s<t&&(t=s),e.update({from:t}),$(this).prop("value",t)}),i.on("change",function(){var t=$(this).prop("value");t<o?t=o:c<t&&(t=c),e.update({to:t}),$(this).prop("value",t)})})}function gridToggle(){var t=$(".catalogue-blocks"),e=$(".line-sorting__view-toggle");function o(){e.removeClass("active"),t.hasClass("catalogue-blocks_row")?$(".line-sorting__view-toggle_row").addClass("active"):$(".line-sorting__view-toggle_grid").addClass("active")}e.on("click",function(){$(this).hasClass("line-sorting__view-toggle_row")?t.addClass("catalogue-blocks_row"):t.removeClass("catalogue-blocks_row"),o()}),o()}var tooltips={el:"[data-tippy-content]",init:function(){tippy(tooltips.el,{duration:300,trigger:"click",placement:"auto",zIndex:99,offset:[0,15],maxWidth:380})}};function comparison(){var t=$(".comparison-property"),a=$(".comparison-properties"),n=a.eq(0).find(".comparison-property").length,e=$(".comparison-toggle__button");function o(){for(var t,e=$(".comparison-slide .product-card"),o=[],s=0;s<n;s++)!function(o){var t,s=[],n=[];a.each(function(e){$(this).find(".comparison-property").each(function(t){t==o&&($(this).css("height","auto"),n[e]=this,s[e]=$(this).height())})}),t=Math.max.apply(null,s),$(n).height(t)}(s);e.each(function(t){$(this).css("height","auto"),o[t]=$(this).height()}),t=Math.max.apply(null,o),e.height(t)}t.on("customTouchstart customMouseenter",function(e){var o=$(this).index();a.each(function(){var t=$(this).find(".comparison-property");"customTouchstart"==e.type?t.eq(o).addClass("touch"):t.eq(o).addClass("hover")})}),t.on("customTouchend customMouseleave",function(){var t=$(this).index();a.each(function(){$(this).find(".comparison-property").eq(t).removeClass("touch").removeClass("hover")})}),t.length&&(o(),$(window).on("resize",function(t){setTimeout(function(){o()},500)}));for(var s=0;s<n-1;s++)!function(o){var s=[],n=[],e=void 0;$(".comparison-slider .comparison-properties").each(function(e){$(this).find(".comparison-property").each(function(t){t==o&&(n[e]=this,s[e]=$(this).text())})}),s.forEach(function(t){t!==s[0]&&(e=!1)}),0==e&&($(n).addClass("comparison-property_difference"),$(".comparison__aside").find(".comparison-property").eq(o).addClass("comparison-property_difference"))}(s);e.on("click",function(){e.removeClass("active"),$(this).addClass("active"),$(this).hasClass("comparison-toggle__button-all")?t.show():(t.hide(),$(".comparison-property_difference").show())})}
//# sourceMappingURL=maps/scripts.min.js.map
