"use strict";function _createForOfIteratorHelper(t,e){var s;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(s=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,r=!1;return{s:function(){s=t[Symbol.iterator]()},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}lazySizes.cfg.init=!1,customScroll(),$(document).ready(function(){select.init(),touchHoverEvents(),inputs(),search(),nav(),toggle(),scrollTo(),popup.init(),slider.init(),fixedBlocks(),tabs(),scrollToReviews(),header(),diagram(),rating(),calculator(),stagesToggle(),jsRange(),gridToggle(),setTimeout(function(){lazy()},500)});var brakepoints={xs:576,sm:768,md:992,lg:1280};function touchHoverEvents(){document.addEventListener("touchstart",t),document.addEventListener("touchend",t),document.addEventListener("mouseenter",t,!0),document.addEventListener("mouseleave",t,!0),document.addEventListener("mousedown",t),document.addEventListener("mouseup",t),document.addEventListener("contextmenu",t);var o,n,i="a[class], button, label, input, textarea, tr, .js-touch-hover, .selectric-items li, .selectric .label, .button",r=250;function t(t){var e=t.target!==document&&t.target.closest(i);if(e){if("touchstart"==t.type){o=!0;var s,a=_createForOfIteratorHelper(document.querySelectorAll(i));try{for(a.s();!(s=a.n()).done;){s.value.classList.remove("touch")}}catch(t){a.e(t)}finally{a.f()}clearTimeout(n),e.classList.add("touch")}else"touchend"==t.type?(setTimeout(function(){e.classList.remove("touch")},r),n=setTimeout(function(){o=!1},1e3)):"contextmenu"==t.type&&(e.classList.remove("touch"),n=setTimeout(function(){o=!1},1e3));"mouseenter"!=t.type||o||e!=t.target?"mouseleave"!=t.type||o||e!=t.target||(e.classList.remove("hover"),e.classList.remove("focus")):e.classList.add("hover"),"mousedown"==t.type?e.classList.add("focus"):"mouseup"==t.type&&e.classList.remove("focus")}}}function lazy(){document.addEventListener("lazybeforeunveil",function(t){var e,s=t.target.tagName;t.target.getAttribute("data-src"),t.target.parentNode;"IMG"!==s&&(e=t.target.getAttribute("data-src"),t.target.style.backgroundImage="url('".concat(e,"')"))}),lazySizes.init()}function inputs(){var t=$(".js-validation"),e=$("input, textarea");function s(){e.each(function(){""==$(this).val()?($(this).removeClass("filled"),$(this).parent().removeClass("filled")):($(this).addClass("filled"),$(this).parent().addClass("filled"))})}e.on("focus",function(){$(this).addClass("focused")}),e.on("blur",function(){$(this).removeClass("focused")}),e.on("input change",function(){s()}),s();var l={phone:'[name="phone"]',email:'[name="email"]',name:'[name="name"]',message:'[name="message"]',review:'[name="review"]'},c={phone:{format:{pattern:/^\+7 \d{3}\ \d{3}\-\d{4}$|()/,message:"^Некорректный номер телефона"},presence:{allowEmpty:!1,message:"^Введите номер телефона"}},email:{email:{message:"^Неправильный формат. Попробуйте что-то с @"}},name:{presence:{allowEmpty:!1,message:"^Введите ваше имя"},length:{minimum:2,tooShort:"^Имя слишком короткое (минимум %{count} символа)",maximum:20,tooLong:"^Имя слишком длинное (максимум %{count} символов)"}},message:{presence:{allowEmpty:!1,message:"^Введите ваше сообщение"},length:{minimum:10,tooShort:"^Сообщение слишком короткое (минимум %{count} символов)",maximum:200,tooLong:"^Сообщение слишком длинное (максимум %{count} символов)"}},review:{presence:{allowEmpty:!1,message:"^Напишите ваш отзыв"},length:{minimum:10,tooShort:"^Отзыв слишком короткий (минимум %{count} символов)",maximum:200,tooLong:"^Отзыв слишком длинный (максимум %{count} символов)"}}};Inputmask({mask:"+7 999 999-9999",showMaskOnHover:!1,clearIncomplete:!1}).mask(l.phone);t.each(function(){var t=$(this),r=t.find("input, textarea");function e(t){var s={},a={};r.each(function(){var t=$(this);for(var e in l)t.is(l[e])&&($(this).hasClass("required")||$(this).hasClass("filled"))&&(s[e]=t.val(),a[e]=c[e])});var o=validate(s,a);if(void 0===o)return r.removeClass("error"),r.parent().find(".input__message").remove(),1;if(void 0!==t){var e=!0;for(var n in o)t.is(l[n])&&(t.hasClass("required")||t.hasClass("filled"))&&(e=!1);e&&t.removeClass("error")}else{r.removeClass("error"),r.parent().find(".input__message").remove();for(var i in o)!function(e){r.each(function(){var t=$(this);t.is(l[e])&&(t.hasClass("required")||t.hasClass("filled"))&&(t.addClass("error"),t.parent().append('<span class="input__message">'.concat(o[e][0],"</span>")))})}(i)}}r.on("input",function(){var t=this;setTimeout(function(){e($(t))},100)}),t.on("submit",function(t){t.preventDefault(),e()})})}function search(){$(".search").each(function(){var e=$(this),t=e.find(".search__input"),s=e.find(".search__content"),a=!1,o=!1;s.on("mouseenter mouseleave",function(t){device.desktop()&&("mouseenter"==t.type?o=!0:(o=!1,a||e.removeClass("active-content")))}),t.on("blur focus input",function(t){"blur"==t.type?(a=!1,!o&&device.desktop()&&e.removeClass("active-content")):"focus"==t.type?a=!0:""!==$(this).val()?e.addClass("active").addClass("active-content"):e.removeClass("active").removeClass("active-content")}),$(document).on("touchstart",function(t){0==$(t.target).closest(e).length&&e.removeClass("active-content")})})}function customScroll(){document.querySelectorAll(".scrollbar").forEach(function(t){var e,s,a,o=$(t);function n(){var t=a.outerHeight()-s.outerHeight(),e=s.offset().top-a.offset().top;0<e?o.removeClass("scrollbar_start"):o.addClass("scrollbar_start"),e<t?o.removeClass("scrollbar_end"):o.addClass("scrollbar_end")}device.desktop()&&!o.is(".scrollbar_mobile-only")?(e=new SimpleBar(t),a=(s=o).find(".scrollbar__content"),e.getScrollElement().addEventListener("scroll",function(){n()})):(o.addClass("scrollbar_mobile"),s=o.find(".scrollbar__content"),a=o.find(".scrollbar__inner"),s.on("scroll",function(){n()})),s.add(a).attr("data-scroll-lock-scrollable",""),n()})}window.popup={init:function(){this.$trigger=$("[data-popup-open]"),this.$close=$("[data-popup-close]"),this.$trigger.on("click",function(t){t.preventDefault();var e=$($(this).attr("href"));e.length&&popup.open(e)}),$(document).on("click",function(t){var e,s=$(t.target);(s.closest(popup.$close).length||s.closest(".popup").length&&0==s.closest(".popup-block__container").length)&&(t.preventDefault(),e=s.closest(".popup").length?s.closest(".popup"):$(".city-question-popup"),popup.close(e))})},open:function(t){function e(){s.active=t,scrollLock.disablePageScroll(),t.addClass("active")}var s=this;this.active?popup.close(this.active,function(){e()}):e()},close:function(t,e){var s=this;scrollLock.enablePageScroll(),t.removeClass("active"),setTimeout(function(){s.active=void 0,"function"==typeof e&&e()},250)}};var slider={el:$(".slider"),init:function(){slider.el.each(function(){var t,e,s=this,a=1,o=1,n=1,i=1,r=1,l=!1,c=!1,d=!1,u=!1,v='<button type="button" class="button button_style-1 slider__next"><svg class="icon" viewBox="0 0 12 20"><path d="M2.18 19.05L.77 17.64 8.4 10 .77 2.36 2.18.95 11.23 10l-9.05 9.05z"></path></svg></button>',f='<button type="button" class="button button_style-1 slider__prev"><svg class="icon" viewBox="0 0 12 20"><path d="M2.18 19.05L.77 17.64 8.4 10 .77 2.36 2.18.95 11.23 10l-9.05 9.05z"></path></svg></button>';function h(t){t.slick({rows:0,infinite:!0,dots:c,arrows:l,nextArrow:v,prevArrow:f,speed:500,centerMode:d,slidesToShow:a,slidesToScroll:a,autoplay:u,autoplaySpeed:5e3,responsive:[{breakpoint:brakepoints.lg,settings:{slidesToShow:o,slidesToScroll:o}},{breakpoint:brakepoints.md,settings:{slidesToShow:n,slidesToScroll:n}},{breakpoint:brakepoints.sm,settings:{slidesToShow:i,slidesToScroll:i}},{breakpoint:brakepoints.xs,settings:{slidesToShow:r,slidesToScroll:r}}]})}$(this).is(".slider_dots")&&(c=!0),$(this).is(".slider_arrows")&&(l=!0),$(this).is(".slider_grid")&&(c=l=!0),$(this).is(".popular-projects__slider")?(i=n=o=a=2,r=1,$(this).is(".popular-projects__slider_mobile-only")?(t=!1,(e=function(){$(window).width()<brakepoints.md&&!t?(t=!0,h($(s))):$(window).width()>=brakepoints.md&&t&&(t=!1,setTimeout(function(){$(s).slick("unslick")},500))})(),$(window).on("resize",function(){e()})):h($(this))):$(this).is(".home-banner")?(u=!0,v='<button class="home-banner__arrow home-banner__next" aria-label="Next" type="button"><svg viewBox="0 0 15 26"><path d="M1.99869 0.292969L0.584473 1.70718L11.8774 13.0001L0.584472 24.293L1.99869 25.7072L14.7058 13.0001L1.99869 0.292969Z"/></svg></button>',f='<button class="home-banner__arrow home-banner__prev" aria-label="Previous" type="button"><svg viewBox="0 0 15 26"><path d="M13.286 0.292969L14.7002 1.70718L3.4073 13.0001L14.7002 24.293L13.286 25.7072L0.578877 13.0001L13.286 0.292969Z"/></svg></button>',h($(this))):$(this).is(".photo-slider")?h($(this)):$(this).is(".news-preview-section__slider")?(o=a=3,i=n=2,r=1,h($(this))):$(this).is(".section-partners__slider")?(u=!0,a=6,o=5,n=4,i=3,r=1,h($(this))):$(this).is(".projects-slider")||$(this).is(".progress-projects-slider")?(a=4,o=3,i=n=2,r=1,h($(this))):$(this).is(".product-slider")?(o=$(this).is(".product-slider_style-2")?(a=4,3):(a=5,4),n=3,i=2,r=1,h($(this))):$(this).is(".wiki-slider")&&(a=4,n=o=3,i=2,r=1,h($(this)))})}},select={init:function(){this.items=$("select"),this.items.length&&this.items.selectric({disableOnMobile:!1,nativeOnMobile:!1,arrowButtonMarkup:'<svg class="icon" viewBox="0 0 12 7" xmlns="http://www.w3.org/2000/svg"><path d="M9.72606 -1.19209e-07L11.1403 1.41421L5.57036 6.98453L4.15614 5.57031L9.72606 -1.19209e-07Z"/><path d="M0 1.41421L1.41421 1.19209e-07L6.98434 5.57047L5.57036 6.98453L0 1.41421Z"/></svg>'})}};function header(){var t,e=$(".header");function s(){$(window).width()<brakepoints.md&&(t=$(window).scrollTop(),130<t?e.addClass("fixed"):e.removeClass("fixed"))}s(),$(window).scroll(function(){s()})}function nav(){var e,s=$(".nav-toggle"),a=$(".mobile-nav");s.on("click",function(t){t.preventDefault(),e?(e=!1,scrollLock.enablePageScroll(),a.add(s).removeClass("active")):(e=!0,scrollLock.disablePageScroll(),a.add(s).addClass("active"))})}function toggle(){var t=$(".toggle-section");t.each(function(){var t,e=$(this),s=e.children(".toggle-section__head"),a=e.children(".toggle-section__content"),o=!!e.hasClass("active"),n=a.height();function i(){o?(e.add(a).add(s).addClass("active"),e.is("[data-class-only]")||(a.is(".scrollbar")&&a.height(n),a.slideDown(250))):(e.add(s).add(a).removeClass("active"),e.is("[data-class-only]")||(t?(a.is(".scrollbar")&&(n=a.height()),a.stop().slideUp(250)):a.hide(0)))}e.is("[data-out-hide]")&&$(document).on("click touchstart",function(t){var e=$(t.target);e.closest(a).length||e.closest(s).length||!o||(o=!1,i())}),s.on("click",function(){o=!o,i()}),i(),t=!0})}function tabs(){$(".tabs").each(function(){var t=$(this).find(".tabs__toggle"),e=$(this).find(".tabs__block"),s=0<$(this).find(".tabs__block.active").length?e.index($(this).find(".tabs__block.active")):0;function a(){e.hide().eq(s).fadeIn(250),t.removeClass("active").eq(s).addClass("active")}a(),t.on("click",function(){s=t.index($(this)),a()})})}function scrollTo(){var t=$("[data-scroll]");t.on("click",function(t){t.preventDefault();var e=$(this).attr("href"),s=$(e);s.length&&$("html, body").animate({scrollTop:s.offset().top},500)})}function scrollToReviews(){var t=$("[data-reviews]");t.on("click",function(t){t.preventDefault(),$(".item-info__reviews-toggle:visible").not(".active").trigger("click");var e=$(".reviews__content"),s=$(window).width()<brakepoints.md?e.offset().top-50:e.offset().top;e.length&&$("html, body").animate({scrollTop:s},500)})}function fixedBlocks(){$("[data-fixed-toggle]").on("click",function(t){t.preventDefault();var e=$(this).attr("href"),s=$(e);s.length&&(s.addClass("active"),scrollLock.disablePageScroll(),s.find("[data-fixed-close]").on("click",function(t){t.preventDefault(),s.removeClass("active"),scrollLock.enablePageScroll()}))})}function rating(){$(document).on("click",".js-rating__star",function(t){var e=$(t.target).closest(".js-rating"),s=$(t.target).closest(".js-rating__star"),a=s.parents(".js-rating").find(".js-rating__star"),o=s.parents(".js-rating").find("input"),n=+s.attr("data-index"),i=e.find(".js-rating__description-item");o.val(n),i.removeClass("active"),i.eq(n-1).addClass("active"),a.each(function(t){t<n?$(this).addClass("active"):$(this).removeClass("active")})}),$(document).on("mousemove mouseleave",".js-rating__list",function(t){var e,s,a=$(t.target).closest(".js-rating"),o=$(t.target).closest(".js-rating__list"),n=o.find(".js-rating__star"),i=o.parents(".js-rating").find("input"),r=a.find(".js-rating__description-item");"mousemove"==t.type&&device.desktop()&&0<o.length&&(e=(t.clientX-o.offset().left)/o.width()*5,n.each(function(t){t<e?$(this).addClass("active"):$(this).removeClass("active")}),r.each(function(t){return t<e&&(r.removeClass("active"),void $(this).addClass("active"))})),"mouseleave"==t.type&&device.desktop()&&0<o.length&&(s=i.val(),r.removeClass("active"),0<s?(r.eq(s-1).addClass("active"),n.each(function(t){t<s?$(this).addClass("active"):$(this).removeClass("active")})):n.removeClass("active"))})}function calculator(){$(".calc-count-block").each(function(){var t=$(this),e=t.find(".js-plus"),s=t.find(".js-minus"),a=t.find("input"),o=+a.val();function n(){o<1||1==o?(o=1,s.addClass("disabled")):s.removeClass("disabled"),a.val(o)}n(),e.on("click",function(){o++,n()}),s.on("click",function(){o--,n()}),a.on("change input",function(){setTimeout(function(){o=+a.val(),n()},100)})})}function stagesToggle(){var t=$("[data-stage-toggle]"),e=$("[data-stage]"),s=0<$(".active[data-stage-toggle]").length?$(".active[data-stage-toggle]").attr("data-stage-toggle"):"all";function a(){t.removeClass("active").closest("[data-stage-toggle='".concat(s,"']")).addClass("active"),"all"==s?e.addClass("active"):e.each(function(){$(this).attr("data-stage")==s?$(this).addClass("active"):$(this).removeClass("active")})}t.on("click",function(t){t.preventDefault(),s=$(this).attr("data-stage-toggle"),a()}),a()}function diagram(){var t,e,s,a,o,n,i,r,l,c,d,u,v,f,h=$(".brigade-diagram__circle");function p(t){return t*(Math.PI/180)}h.length&&(t=h.find(".brigade-diagram__circle-item_style-2 circle"),e=parseInt(h.attr("data-percent")),s=$(".brigade-diagram__info_style-1"),a=$(".brigade-diagram__info_style-2"),o=(h.height()-30)/2,i=360-(n=90-3.6*e/2),r=p(n),l=p(i),c=t[0].getTotalLength(),t.css("stroke-dasharray",c),t.css("stroke-dashoffset",c-c/100*e),d=o*Math.cos(l),u=o*Math.sin(l),v=o*Math.cos(r),f=o*Math.sin(r),s.css({transform:"translate(".concat(-d,"px, ").concat(-u,"px)")}),a.css({transform:"translate(".concat(v,"px, ").concat(-f,"px)")}))}function jsRange(){$(".filter-range").each(function(){var e,s,a,t=$(this),o=t.find(".js-range"),n=t.find(".filter-range__input-from"),i=t.find(".filter-range__input-to"),r=+o.attr("data-min"),l=+o.attr("data-max");function c(t){s=t.from,a=t.to,n.prop("value",s),i.prop("value",a)}o.ionRangeSlider({skin:"round",type:"double",min:r,max:l,from:r,to:l,onStart:c,onChange:c,onFinish:c}),e=o.data("ionRangeSlider"),n.on("change",function(){var t=$(this).prop("value");t<r?t=r:a<t&&(t=a),e.update({from:t}),$(this).prop("value",t)}),i.on("change",function(){var t=$(this).prop("value");t<s?t=s:l<t&&(t=l),e.update({to:t}),$(this).prop("value",t)})})}function gridToggle(){var t=$(".catalogue-blocks"),e=$(".line-sorting__view-toggle");function s(){e.removeClass("active"),t.hasClass("catalogue-blocks_row")?$(".line-sorting__view-toggle_row").addClass("active"):$(".line-sorting__view-toggle_grid").addClass("active")}e.on("click",function(){$(this).hasClass("line-sorting__view-toggle_row")?(t.addClass("catalogue-blocks_row"),console.log("+")):t.removeClass("catalogue-blocks_row"),s()}),s()}
//# sourceMappingURL=maps/scripts.min.js.map
